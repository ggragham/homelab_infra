---
##############
###  Base  ###
##############

DOMAIN_NAME: example.com  # Domain name for server.
USERNAME: user  # Default system user.
NETWORK_INTERFACE: eth0  # Network interface to be used.
SSH_PORT: 22  # SSH port.

###############################
###  Base Config Role Vars  ###
###############################
# Auth
AUTH_CONFIGURATION_ENABLED: false  # Enable or disable auth configuration.

# PKGs
PKGS_MANAGE_ENABLED: false  # Enable or disable PKGs management tasks.

PKGS_DEBIAN_REMOVAL_LIST:  # Packages to remove on Debian.
  - nano
PKGS_DEBIAN_INSTALLATION_LIST:  # Packages to install on Debian.
  - bash-completion
  - curl
  # - duf
  - vim

PKGS_REDHAT_REMOVAL_LIST:  # Packages to remove on RHEL-based system
  - nano
PKGS_REDHAT_INSTALLATION_LIST:  # Packages to install on RHEL-based system.
  - bash-completion
  - curl
  - vim

# Wireguard
WIREGUARD_ENABLED: false  # Enable or disable WireGuard VPN.
WIREGUARD_CONFIG_PATH_SRC: ./assets/wg0.conf  # Source path for WireGuard configuration.

# OpenVPN
OPENVPN_ENABLED: false  # Enable or disable OpenVPN VPN.
OPENVPN_CONFIG_PATH_SRC: ./assets/client0.conf  # Source path for OpenVPN configuration.

# Storage
STORAGE_ENABLED: false  # Enables or disables external storages mounting.

## If no LUKS-encrypted storages are used, leave this list empty:
# STORAGE_LUKS_LIST: []
STORAGE_LUKS_LIST:  # List of LUKS encrypted block devices.
  - label: crypt_data01  # Label for the LUKS device.
    keyfile_src: ./assets/data01.key  # Path to the keyfile source.
    keyfile_dest: /root/data01.key  # Path to store the keyfile on the target machine.
    mapper: mapper_disk01  # Device mapper name for the LUKS device.

  - label: crypt_data02
    keyfile_src: ./assets/data02.key
    keyfile_dest: /root/data02.key
    mapper: mapper_disk02

## If no storages with generic FS (like ext4, xfs, fat) are used, leave this list empty:
# STORAGE_GENERIC_FS_LIST: []
STORAGE_GENERIC_FS_LIST:  # List of generic filesystem storage configurations.
  - label: data01  # Label for the filesystem.
    owner: root  # Owner of the mounted filesystem.
    mount_point: /mnt/data01  # Mount point for the filesystem.
    fstype: ext4  # Filesystem type.
    opts: defaults  # Mount options.

  - label: data03
    owner: root
    mount_point: /mnt/data03
    fstype: ext4
    opts: defaults

## If no storages with BTRFS subvols are used, leave this list empty:
# STORAGE_BTRFS_LIST: []
STORAGE_BTRFS_LIST:  # List of BTRFS subvolume configurations.
  - label: data02  # Label for the BTRFS subvolume.
    owner: root  # Owner of the subvolume.
    subvol: '@cache'  # Name of the BTRFS subvolume.
    mount_point: /mnt/subvol2/cache  # Mount point for the subvolume.
    compression: zstd:1  # Compression method used.

  - label: data02
    owner: root
    subvol: '@db'
    mount_point: /mnt/subvol2/db
    compression: zstd:1

  - label: data04
    owner: root
    subvol: '@media'
    mount_point: /mnt/subvol4/media
    compression: zstd:1

  - label: data04
    owner: root
    subvol: '@backup'
    mount_point: /mnt/subvol4/backup
    compression: zstd:1

# SFTP
SFTP_ENABLED: false  # Enable or Disable SFTP sharing.

## If no SFTP groups are used, leave this list empty:
# SFTP_GROUPS: []
SFTP_GROUPS:  # List of SFTP groups.
  - name: sftpgroup  # Name of the SFTP group.

## If no SFTP users are used, leave this list empty:
# SFTP_USERS: []
SFTP_USERS:  # List of SFTP users.
  - name: sftpuser  # Name of the SFTP user.
    password: foobar123  # Password for the user (plain text; will be hashed).
    group: sftpgroup  # Group to which the user belongs.

  - name: sftpuser2
    password: foobar321

SFTP_SHARES_LIST:  # List of SFTP user or group configurations.
  - type: user  # Type of match (user/group).
    name: sftpuser  # Name of the user or group.
    chroot: /mnt/sftp_chroot  # Chroot directory for the SFTP share.
    subdir: share  # User's working directory inside chroot.
    mode: '0750'  # Permissions mode for the chroot directory.
    password_auth_enabled: true  # Enable or disable password authentication.

  - type: user
    name: sftpuser2
    chroot: /mnt/sftp_chroot
    subdir: data
    mode: '0750'
    password_auth_enabled: true

  - type: group
    name: sftpgroup
    chroot: /mnt/sftp_share
    subdir: media
    mode: '0570'
    password_auth_enabled: false

# SAMBA
SAMBA_ENABLED: false  # Enable or disable SAMBA sharing.
SAMBA_WORKGROUP: WORKGROUP  # Workgroup name for the SAMBA server.
SAMBA_SERVER_STRING: SAMBA Share  # Description string for the SAMBA server.

## If no SAMBA groups are used, leave this list empty:
# SAMBA_GROUPS: []
SAMBA_GROUPS:  # List of SAMBA groups.
  - name: smbgroup  # Name of the SAMBA group.

## If no SAMBA users are used, leave this list empty:
# SAMBA_USERS: []
SAMBA_USERS:  # List of SAMBA users.
  - name: smbuser  # Name of the SAMBA user.
    password: foobar123  # Password for the user.
    groups: smbgroup  # Groups to which the user belongs.

  - name: user2
    password: foobar321

SAMBA_SHARES_LIST:  # List of SAMBA shares.
  - name: data  # Name of the SAMBA share.
    path: /mnt/smb_data  # Path to the shared directory.
    allow_guests: false  # Allow guest access.
    browseable: false  # Make the share browseable.
    writable: false  # Allow writing to the share.
    valid_users: smbuser @smbgroup  # Valid users for the share.
    force_user: smbuser  # Force file creation as this user.
    force_group: smbgroup  # Force file creation as this group.
    create_mask: '0660'  # Permissions mask for newly created files.
    directory_mask: '0770'  # Permissions mask for new directories.

  - name: share
    path: /mnt/smb_share
    allow_guests: true
    browseable: true
    writable: true
    force_user: nobody

#############################
###  Hardening role vars  ###
#############################

# Misc
HARDENING_MISC_CONFIG_ENABLED: true  # Enable or disable miscellaneous hardening tasks.
HARDENING_MISC_YESCRYPT_HOST_FACTOR: 8  # Yescrypt factor for password hashing difficulty.
HARDENING_MISC_NODE_TYPE: server  # Specify the type of node (server or desktop).

# Auth
HARDENING_AUTH_FAILLOCK_CONFIG_ENABLED: true  # Enable or disable faillock.
HARDENING_AUTH_FAILLOCK_MAX_ATTEMPTS: 3  # Maximum number of failed login attempts.
HARDENING_AUTH_FAILLOCK_UNLOCK_TIME: 600  # Time (in seconds) to unlock after exceeding attempts.

# Network
HARDENING_NETWORK_CONFIG_ENABLED: true  # Enable or disable network configuration.
HARDENING_NETWORK_DISABLE_IPV6: true  # Enable or disable IPv6 stack disabling.

# Debian-based
HARDENING_DEBIAN_HARDENING_ENABLED: true  # Enable or disable Debian-based configuration.

# RedHat family
HARDENING_REDHAT_HARDENING_ENABLED: true  # Enable or disable RedHat-based configuration.

# SSH
HARDENING_SSH_CONFIG_ENABLED: true  # Enable or disable SSH configuration.
HARDENING_SSH_REMOVE_ROOT_PASSWORD_ENABLED: true  # Enable or disable root password removal.
HARDENING_SSH_PERMIT_ROOT_LOGIN: false  # Allow or disallow root login via SSH.

# Fail2ban
HARDENING_FAIL2BAN_ENABLED: true  # Enable or disable Fail2Ban installation.
HARDENING_FAIL2BAN_BANTIME: 5m  # Duration for which IPs are banned.
HARDENING_FAIL2BAN_FINDTIME: 3m  # Time window to consider failed login attempts.
HARDENING_FAIL2BAN_MAXRETRY: 5  # Number of allowed failed login attempts before banning IP.

# Chrony
HARDENING_CHRONY_ENABLED: true  # Enable or disable Chrony installation.

# Firewall
HARDENING_FIREWALL_ENABLED: true  # Enable or disable firewall hardening.
HARDENING_FIREWALL_BACKEND: iptables  # Firewall backend.
HARDENING_FIREWALL_RESET: false  # Enable or disable resetting the firewall rules.
HARDENING_FIREWALL_IPTABLES_CONFIG_SRC: ./assets/default.iptables.rules.j2  # Path to the iptables configuration template file.

################
###  Docker  ###
################

DOCKER_NETWORK_NAME: homelab_network  # Name of the Docker network.
DOCKER_BRIDGE_NAME: homelab_bridge  # Name of the bridge interface for the Docker network.

###############
###  NGINX  ###
###############

NGINX_DOCKERIZED: false  # Nginx dockerized install toogle.
NGINX_VERSION_DOCKER: latest  # Nginx version in Docker (rootless).
NGINX_DOCKER_NETWORK_NAME: '{{ DOCKER_NETWORK_NAME }}'  # Name of the Docker network.

NGINX_DOMAIN_NAME: '{{ DOMAIN_NAME }}'  # Nginx server domain.

SSL_CERT_NAME: cert.crt  # SSL certificate filename placed in the assets/ directory.
SSL_KEY_NAME: cert.key  # SSL Key filename placed in the assets/ directory.
SSL_DH_NAME: dhparam.pem  # DH key filename placed in the assets/ directory.

SSL_CERT_PATH: ./assets/{{ SSL_CERT_NAME }}  # SSL Cert path.
SSL_KEY_PATH: ./assets/{{ SSL_KEY_NAME }}  # SSL Key path.
SSL_DH_PATH: ./assets/{{ SSL_DH_NAME }}  # DH key path.

###################
###  NextCloud  ###
###################

NEXTCLOUD_DOCKERIZED: true  #  Toggle for Docker setup.
NEXTCLOUD_DOCKER_VERSION: stable  # NextCloud Docker image version.
NEXTCLOUD_DOCKER_NETWORK_NAME: '{{ DOCKER_NETWORK_NAME }}'  # Name of the Docker network.

NEXTCLOUD_USE_NGINX: false  # Toggle to use Nginx as a reverse proxy for NextCloud.
NEXTCLOUD_DOCKER_WEBSERVER_PORT: false  # Nextcloud web server port configuration (set to false to disable, or specify a port number).
NEXTCLOUD_DOMAIN: cloud.{{ DOMAIN_NAME }}  # Domain name for the NextCloud service.
NEXTCLOUD_PORT: 9001  # Nextcloud service port.
NEXTCLOUD_DATA_PATH: '{{ DISK_DATA_PATH }}/nextcloud'  # Nextcloud data path.
NEXTCLOUD_MAX_FILE_SIZE: 4G  # Maximum upload file size.

NEXTCLOUD_DOCKER_MARIADB_VERSION: lts  # MariaDB Docker image version.
NEXTCLOUD_DB_ROOT_PASSWORD: root1234!  # MariaDB root-user password.
NEXTCLOUD_DB_NAME: nextclouddb  # Nextcloud database name.
NEXTCLOUD_DB_USER: nextclouduser  # Nextcloud database user.
NEXTCLOUD_DB_PASSWORD: qwerty1234!  # Nextcloud database password.

###############
###  Gitea  ###
###############

GITEA_DEPLOY: "{{ inventory_hostname == 'gitea_host' }}"  # Service variable. For separate installation Gitea and ActRunner by host.
GITEA_IP: 192.168.1.30

GITEA_DOCKERIZED: true  # Gitea dockerized install toogle.
GITEA_DOCKER_VERSION: latest  # Gitea Docker image version (rootless).
GITEA_DOCKER_NETWORK_NAME: '{{ DOCKER_NETWORK_NAME }}'  # Name of the Docker network.

GITEA_USE_NGINX: false  # Toggle to use Nginx as a reverse proxy for Gitea.
GITEA_APP_NAME: tea  # Name of Gitea application.
GITEA_ADMIN_USER: gitea_admin  # Username for the Gitea administrator account.
GITEA_ADMIN_EMAIL: gitea_admin@{{ DOMAIN_NAME }}  # Email address for the Gitea administrator account.
GITEA_ADMIN_PASSWORD: qwerty1234!  # Password for the Gitea administrator account.
GITEA_LFS_JWT_SECRET: example_of_lfs_jwt_secret  # Secret key for Gitea's Large File Storage JWT authentication.
GITEA_INTERNAL_TOKEN: example_of_internal_token  # Gitea's internal token.
GITEA_JWT_SECRET: example_of_jwt_key  # Secret key for Gitea's JWT authentication.

GITEA_DOMAIN: git.{{ DOMAIN_NAME }}  # Gitea's domain name.
GITEA_PORT: 3000  # Gitea's running port.
GITEA_DATA_PATH: '{{ DISK_DATA_PATH }}/gitea'  # Gitea's data storage path.
GITEA_CHECK_UPDATES: false  # Controls Gitea's update checks.
GITEA_PASSWORD_HASH_ALGO: pbkdf2  # Gitea's password hashing algorithm.

GITEA_DOCKER_MARIADB_VERSION: lts  # MariaDB Docker image version.

GITEA_DB_DEPLOY: false  # Toggle to include database service in Docker Compose.
GITEA_DB_HOST: '{{ GITEA_DOCKER_DB_SERVICE_NAME }}'  # Database host for Gitea.
GITEA_DB_PORT: 3306  # Port for the Gitea database server.
GITEA_DB_ROOT_PASSWORD: root1234!  # MariaDB root-user password.
GITEA_DB_NAME: giteadb  # Gitea's database name.
GITEA_DB_USER: gitea_db_user  # Gitea's database username.
GITEA_DB_PASSWORD: gitea_db_password  # Gitea's database password.

ACTRUNNER_DEPLOY: "{{ inventory_hostname == 'actrunner_host' }}"  # Service variable. For separate installation Gitea and ActRunner.

ACT_VERSION: latest  # act_runner version.
ACT_REREGISTER_RUNNER: false  # Re-register runner.

################
###  PiHole  ###
################

PIHOLE_DOCKERIZED: true  # Pihole dockerized install toogle.
PIHOLE_DOCKER_NETWORK_NAME: '{{ DOCKER_NETWORK_NAME }}'  # Name of the Docker network.
PIHOLE_DOCKER_WEBSERVER_PORT: false  # Web server port exposure (false to disable or specify a port number).
PIHOLE_USE_NGINX: false  # Toggle to use Nginx as a reverse proxy for Pi-hole.
PIHOLE_DOMAIN_NAME: '{{ DOMAIN_NAME }}'
PIHOLE_DOMAIN: dns.{{ PIHOLE_DOMAIN_NAME }}  # Domain name for the Pi-hole service.
PIHOLE_DOCKER_VERSION: latest  # Pi-hole Docker image version.
PIHOLE_ADMIN_PASSWORD: qwerty1234!  # Password used to login in Pi-hole WebUI.

PIHOLE_DNS_1: 1.1.1.1  # Primary DNS server.
PIHOLE_DNS_2: 1.0.0.1  # Secondary DNS server.
PIHOLE_DNS_3: 9.9.9.9  # Tertiary DNS server.
PIHOLE_DNS_4: 149.112.112.112  # Quaternary DNS server.
PIHOLE_QUERY_LOGGING: 'true'  # Toggle query logging.
PIHOLE_CACHE_SIZE: 10000  # DNS cache size.
PIHOLE_WEBUI_BOXED_LAYOUT: boxed  # Web interface layout.
PIHOLE_WEBTHEME: default-dark  # Web interface theme.

PIHOLE_DNS_RECORDS:  # List of DNS records to be created in Pi-hole.
  - '{{ ansible_host }} {{ PIHOLE_DOMAIN_NAME }}'
  - '{{ ansible_host }} {{ PIHOLE_DOMAIN }}'

## Only for baremetal installation. 
PIHOLE_INTERFACE: '{{ NETWORK_INTERFACE }}'  # Network interface for Pi-hole.
PIHOLE_INSTALL_WEB_INTERFACE: 'true'  # Toggle web interface installation.

######################
###  Transmission  ###
######################

TRANSMISSION_DOCKERIZED: true  # Transmission dockerized install toogle.
TRANSMISSION_DOCKER_VERSION: latest  # Transmission Docker image version.
TRANSMISSION_DOCKER_NETWORK_NAME: '{{ DOCKER_NETWORK_NAME }}'  # Name of the Docker network.
TRANSMISSION_DOCKER_WEBSERVER_PORT: false  # Transmission web server port configuration (set to false to disable, or specify a port number).

TRANSMISSION_USE_NGINX: false  # Toggle to use Transmission as a reverse proxy for Gitea.
TRANSMISSION_DATA_PATH: '{{ DISK_DATA_PATH }}/transmission'  # Transmission data directory path.

TRANSMISSION_DOMAIN: torrent.{{ DOMAIN_NAME }}  # Domain name for the Transmission service.
TRANSMISSION_PORT: 9091  # Transmission port.
TRANSMISSION_PEER_PORT: 51413  # Transmission peer port.

TRANSMISSION_USER: transmission  # Username used to login.
TRANSMISSION_PASSWORD: qwerty1234!  # Password used to login.
